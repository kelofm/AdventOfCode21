print(len((lambda L,I:set().union(*[set().union(*[I(l,r) for r in L if r!=l]) for l in L]))(list(filter(lambda l:(l[0].real!=l[1].real and l[0].imag==l[1].imag)or(l[0].real==l[1].real and l[0].imag!=l[1].imag),[[[int(r)+int(i)*1j for r,i in [p.split(',')]][0] for p in l.split("->")] for l in open("input").readlines() if l])),lambda l,r:(lambda p,q,P,R:P(p,R)&P(q,R))(l,r,lambda a,R: set(x+a[0].imag*1j for x in R(round(a[0].real),round(a[1].real))) if a[0].real!=a[1].real else set(a[0].real+y*1j for y in R(round(a[0].imag),round(a[1].imag))),lambda b,e:range(b,e+1) if b<e else range(e,b+1)))))
