print(sum(1 for p in (lambda R,N,A:[R,[A(r,{n:r.count(n) for n in r if n.islower()},R,N) for r in R if r[-1]!="end"]][0])([["start"]],*(lambda N,F:([F(a,b.strip(),N) for a,b in (tuple(l.split('-') for l in open("input") if l))][0],lambda r,C,R,N:[R.append(r+[n]) for n in N[r[-1]] if n.isupper() or C.setdefault(n,0)==0 or (C[n]==1 and max(C.values())<2)]))(dict(),lambda a,b,N:[N,N.setdefault(a,[]).append(b) if b!="start" else 0,N.setdefault(b,[]).append(a) if a!="start" else 0][0])) if p[-1]=="end"))