print(((lambda r: lambda V,m: r(r,V,m,-1,lambda M:any(any(l.count(-1)==5 for l in t) for t in ((M[5*i:5*i+5],M[i:25:5]) for i in range(5)))))(lambda s,V,m,I,f:sum(v for v in m if v!=-1)*V[I] if len(m)==25 and f(m) else s(s,V,[-1 if v==V[I+1] else v for v in sum((l for l in [m[25*k:25*(k+1)] for k in range(len(m)//25)] if not f(l)),[])],I+1,f)))(*(lambda f: [[int(v) for v in f.readline().split(',') if v],sum(([int(v) for v in l.split(' ') if v.strip()] for l in f.readlines() if l),[])])(open("input"))))
